import{d as y,r as u,f as b,g as i,l as a,n as t,O as g,N as l,P as x,o as h,U,q as p,j as k,V as B,J as A,_ as C}from"./CtvzWlFT.js";import{a as _}from"./5gcwzotE.js";import{y as N}from"./6zReAxYI.js";import{s as S}from"./khKH7b5g.js";import{B as m}from"./T8a1OmL8.js";import{_ as v,a as T}from"./CbmRlSk2.js";import{_ as f}from"./CG6vhVrP.js";import"./DWFEnp9h.js";import"./Cca8yeN8.js";import"./CszauIMC.js";import"./DvIeZxc3.js";import"./DxdqOxg8.js";import"./4nfXJs0B.js";import"./DbnPTcif.js";import"./C9OJ2lNH.js";import"./8hU1m9Zy.js";import"./XpcH3hjX.js";import"./DF4FdbSS.js";const V={ydApi:N,sysApi:S},j={class:"flex min-h-screen items-center justify-center bg-gray-50"},D={class:"w-[400px] bg-white p-6 rounded-md shadow-md"},L={class:"flex items-center justify-between"},O={class:"mt-4"},R=y({__name:"login",setup(q){const s=u({username:"",password:"",systemUrl:"https://ydapi.ezrpa.store"}),o=u(!1),n=u(!1);x();const c=async()=>{var d;if(_.sysBaseUrl.value=s.value.systemUrl,!s.value.username||!s.value.password)return window.alert("请填写完整信息");o.value=!0;try{let e=await V.sysApi.sysLogin(s.value.username,s.value.password);console.log("rest"),console.log(e),window.alert("登录成功！"),_.sysToken.value=(d=e==null?void 0:e.token)==null?void 0:d.accessToken,A("/home")}catch(e){console.log(e)}finally{console.log("heleoo"),o.value=!1}},w=()=>{window.location.href="/register"};return(d,e)=>(h(),b("div",j,[i("div",D,[e[6]||(e[6]=i("h2",{class:"text-xl font-bold mb-4 text-center"},"登录",-1)),a(l(T),{model:s.value,"label-placement":"top",class:"space-y-4",onSubmit:g(c,["prevent"])},{default:t(()=>[a(l(v),{label:"用户名"},{default:t(()=>[a(l(f),{value:s.value.username,"onUpdate:value":e[0]||(e[0]=r=>s.value.username=r),placeholder:"请输入用户名",clearable:"",class:"w-full",disabled:o.value},null,8,["value","disabled"])]),_:1}),a(l(v),{label:"密码"},{default:t(()=>[a(l(f),{value:s.value.password,"onUpdate:value":e[1]||(e[1]=r=>s.value.password=r),type:"password",placeholder:"请输入密码",clearable:"","show-password":"",class:"w-full",disabled:o.value},null,8,["value","disabled"])]),_:1}),i("div",L,[a(l(m),{type:"primary",loading:o.value,class:"w-full sm:w-auto",onClick:c},{default:t(()=>e[4]||(e[4]=[p(" 登录 ")])),_:1,__:[4]},8,["loading"]),a(l(m),{text:"",type:"info",onClick:w,disabled:o.value},{default:t(()=>e[5]||(e[5]=[p(" 前往注册 ")])),_:1,__:[5]},8,["disabled"])]),a(l(m),{text:"",type:"info",onClick:e[2]||(e[2]=r=>n.value=!n.value),disabled:o.value},{default:t(()=>[p(k(n.value?"隐藏高级选项":"高级选项"),1)]),_:1},8,["disabled"]),U(i("div",O,[a(l(v),{label:"系统地址"},{default:t(()=>[a(l(f),{value:s.value.systemUrl,"onUpdate:value":e[3]||(e[3]=r=>s.value.systemUrl=r),placeholder:"请输入系统地址",clearable:"",class:"w-full",disabled:o.value},null,8,["value","disabled"])]),_:1})],512),[[B,n.value]])]),_:1},8,["model"])])]))}}),ae=C(R,[["__scopeId","data-v-d5c9b22f"]]);export{ae as default};
