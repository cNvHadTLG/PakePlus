import{r as F,a2 as B,w as K,$ as G,q as I,R as z,a3 as M,d as q,c as b,a4 as J,e as Q,X as Y,x as N,A as ee}from"./CtvzWlFT.js";import{b as h,w}from"./Cca8yeN8.js";import{a as d,o as g,c as te,g as ne}from"./T8a1OmL8.js";import{b as x,x as re}from"./CszauIMC.js";function ie(e){const t=F(!!e.value);if(t.value)return B(t);const r=K(e,n=>{n&&(t.value=!0,r())});return B(t)}function de(){return G()!==null}const he=typeof window<"u",pe=h("n-drawer-body"),ye=h("n-modal-body"),me=h("n-modal-provider"),xe=h("n-modal"),be=h("n-popover-body");function j(e,t,r="default"){const n=t[r];if(n===void 0)throw new Error(`[vueuc/${e}]: slot[${r}] is empty.`);return n()}function T(e,t=!0,r=[]){return e.forEach(n=>{if(n!==null){if(typeof n!="object"){(typeof n=="string"||typeof n=="number")&&r.push(I(String(n)));return}if(Array.isArray(n)){T(n,t,r);return}if(n.type===z){if(n.children===null)return;Array.isArray(n.children)&&T(n.children,t,r)}else n.type!==M&&r.push(n)}}),r}function ge(e,t,r="default"){const n=t[r];if(n===void 0)throw new Error(`[vueuc/${e}]: slot[${r}] is empty.`);const i=T(n());if(i.length===1)return i[0];throw new Error(`[vueuc/${e}]: slot[${r}] should have exactly one child.`)}const c="@@coContext",Ie={mounted(e,{value:t,modifiers:r}){e[c]={handler:void 0},typeof t=="function"&&(e[c].handler=t,g("clickoutside",e,t,{capture:r.capture}))},updated(e,{value:t,modifiers:r}){const n=e[c];typeof t=="function"?n.handler?n.handler!==t&&(d("clickoutside",e,n.handler,{capture:r.capture}),n.handler=t,g("clickoutside",e,t,{capture:r.capture})):(e[c].handler=t,g("clickoutside",e,t,{capture:r.capture})):n.handler&&(d("clickoutside",e,n.handler,{capture:r.capture}),n.handler=void 0)},unmounted(e,{modifiers:t}){const{handler:r}=e[c];r&&d("clickoutside",e,r,{capture:t.capture}),e[c].handler=void 0}};function se(e,t){console.error(`[vdirs/${e}]: ${t}`)}class ae{constructor(){this.elementZIndex=new Map,this.nextZIndex=2e3}get elementCount(){return this.elementZIndex.size}ensureZIndex(t,r){const{elementZIndex:n}=this;if(r!==void 0){t.style.zIndex=`${r}`,n.delete(t);return}const{nextZIndex:i}=this;n.has(t)&&n.get(t)+1===this.nextZIndex||(t.style.zIndex=`${i}`,n.set(t,i),this.nextZIndex=i+1,this.squashState())}unregister(t,r){const{elementZIndex:n}=this;n.has(t)?n.delete(t):r===void 0&&se("z-index-manager/unregister-element","Element not found when unregistering."),this.squashState()}squashState(){const{elementCount:t}=this;t||(this.nextZIndex=2e3),this.nextZIndex-t>2500&&this.rearrange()}rearrange(){const t=Array.from(this.elementZIndex.entries());t.sort((r,n)=>r[1]-n[1]),this.nextZIndex=2e3,t.forEach(r=>{const n=r[0],i=this.nextZIndex++;`${i}`!==n.style.zIndex&&(n.style.zIndex=`${i}`)})}}const v=new ae,l="@@ziContext",Ee={mounted(e,t){const{value:r={}}=t,{zIndex:n,enabled:i}=r;e[l]={enabled:!!i,initialized:!1},i&&(v.ensureZIndex(e,n),e[l].initialized=!0)},updated(e,t){const{value:r={}}=t,{zIndex:n,enabled:i}=r,o=e[l].enabled;i&&!o&&(v.ensureZIndex(e,n),e[l].initialized=!0),e[l].enabled=!!i},unmounted(e,t){if(!e[l].initialized)return;const{value:r={}}=t,{zIndex:n}=r;v.unregister(e,n)}};function L(e){return typeof e=="string"?document.querySelector(e):e()}const Se=q({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup(e){return{showTeleport:ie(Y(e,"show")),mergedTo:Q(()=>{const{to:t}=e;return t??"body"})}},render(){return this.showTeleport?this.disabled?j("lazy-teleport",this.$slots):b(J,{disabled:this.disabled,to:this.mergedTo},j("lazy-teleport",this.$slots)):null}});function D(e){return e instanceof HTMLElement}function P(e){for(let t=0;t<e.childNodes.length;t++){const r=e.childNodes[t];if(D(r)&&(O(r)||P(r)))return!0}return!1}function R(e){for(let t=e.childNodes.length-1;t>=0;t--){const r=e.childNodes[t];if(D(r)&&(O(r)||R(r)))return!0}return!1}function O(e){if(!oe(e))return!1;try{e.focus({preventScroll:!0})}catch{}return document.activeElement===e}function oe(e){if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.getAttribute("disabled"))return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return e.type!=="hidden"&&e.type!=="file";case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}}let f=[];const $e=q({name:"FocusTrap",props:{disabled:Boolean,active:Boolean,autoFocus:{type:Boolean,default:!0},onEsc:Function,initialFocusTo:String,finalFocusTo:String,returnFocusOnDeactivated:{type:Boolean,default:!0}},setup(e){const t=te(),r=F(null),n=F(null);let i=!1,o=!1;const Z=typeof document>"u"?null:document.activeElement;function p(){return f[f.length-1]===t}function S(s){var a;s.code==="Escape"&&p()&&((a=e.onEsc)===null||a===void 0||a.call(e,s))}N(()=>{K(()=>e.active,s=>{s?(H(),g("keydown",document,S)):(d("keydown",document,S),i&&k())},{immediate:!0})}),ee(()=>{d("keydown",document,S),i&&k()});function A(s){if(!o&&p()){const a=$();if(a===null||a.contains(ne(s)))return;u("first")}}function $(){const s=r.value;if(s===null)return null;let a=s;for(;a=a.nextSibling,!(a===null||a instanceof Element&&a.tagName==="DIV"););return a}function H(){var s;if(!e.disabled){if(f.push(t),e.autoFocus){const{initialFocusTo:a}=e;a===void 0?u("first"):(s=L(a))===null||s===void 0||s.focus({preventScroll:!0})}i=!0,document.addEventListener("focus",A,!0)}}function k(){var s;if(e.disabled||(document.removeEventListener("focus",A,!0),f=f.filter(y=>y!==t),p()))return;const{finalFocusTo:a}=e;a!==void 0?(s=L(a))===null||s===void 0||s.focus({preventScroll:!0}):e.returnFocusOnDeactivated&&Z instanceof HTMLElement&&(o=!0,Z.focus({preventScroll:!0}),o=!1)}function u(s){if(p()&&e.active){const a=r.value,y=n.value;if(a!==null&&y!==null){const m=$();if(m==null||m===y){o=!0,a.focus({preventScroll:!0}),o=!1;return}o=!0;const X=s==="first"?P(m):R(m);o=!1,X||(o=!0,a.focus({preventScroll:!0}),o=!1)}}}function _(s){if(o)return;const a=$();a!==null&&(s.relatedTarget!==null&&a.contains(s.relatedTarget)?u("last"):u("first"))}function W(s){o||(s.relatedTarget!==null&&s.relatedTarget===r.value?u("last"):u("first"))}return{focusableStartRef:r,focusableEndRef:n,focusableStyle:"position: absolute; height: 0; width: 0;",handleStartFocus:_,handleEndFocus:W}},render(){const{default:e}=this.$slots;if(e===void 0)return null;if(this.disabled)return e();const{active:t,focusableStyle:r}=this;return b(z,null,[b("div",{"aria-hidden":"true",tabindex:t?"0":"-1",ref:"focusableStartRef",style:r,onFocus:this.handleStartFocus}),e(),b("div",{"aria-hidden":"true",style:r,ref:"focusableEndRef",tabindex:t?"0":"-1",onFocus:this.handleEndFocus})])}}),U=new WeakSet;function ve(e){U.add(e)}function Fe(e){return!U.has(e)}function E(e,t=!0,r=[]){return e.forEach(n=>{if(n!==null){if(typeof n!="object"){(typeof n=="string"||typeof n=="number")&&r.push(I(String(n)));return}if(Array.isArray(n)){E(n,t,r);return}if(n.type===z){if(n.children===null)return;Array.isArray(n.children)&&E(n.children,t,r)}else{if(n.type===M&&t)return;r.push(n)}}}),r}function we(e,t="default",r=void 0){const n=e[t];if(!n)return w("getFirstSlotVNode",`slot[${t}] is empty`),null;const i=E(n(r));return i.length===1?i[0]:(w("getFirstSlotVNode",`slot[${t}] should have exactly one child`),null)}function Te(e,t,r){if(!t)return null;const n=E(t(r));return n.length===1?n[0]:(w("getFirstSlotVNode",`slot[${e}] should have exactly one child`),null)}function ze(e,t=[],r){const n={};return t.forEach(i=>{n[i]=e[i]}),Object.assign(n,r)}function Ze(e,...t){return typeof e=="function"?e(...t):typeof e=="string"?I(e):typeof e=="number"?I(String(e)):null}const{cubicBezierEaseIn:C,cubicBezierEaseOut:V}=re;function Ae({transformOrigin:e="inherit",duration:t=".2s",enterScale:r=".9",originalTransform:n="",originalTransition:i=""}={}){return[x("&.fade-in-scale-up-transition-leave-active",{transformOrigin:e,transition:`opacity ${t} ${C}, transform ${t} ${C} ${i&&`,${i}`}`}),x("&.fade-in-scale-up-transition-enter-active",{transformOrigin:e,transition:`opacity ${t} ${V}, transform ${t} ${V} ${i&&`,${i}`}`}),x("&.fade-in-scale-up-transition-enter-from, &.fade-in-scale-up-transition-leave-to",{opacity:0,transform:`${n} scale(${r})`}),x("&.fade-in-scale-up-transition-leave-from, &.fade-in-scale-up-transition-enter-to",{opacity:1,transform:`${n} scale(1)`})]}export{$e as F,Se as L,ye as a,me as b,Ie as c,pe as d,Fe as e,Ae as f,Te as g,de as h,he as i,j,ze as k,ge as l,xe as m,we as n,ve as o,be as p,E as q,Ze as r,Ee as z};
